<!DOCTYPE html>
<html lang="en">
	<p>Report generated by {{header.user_email_address}} on {{header.date}} using the following search fields: {{header.job_search_fields}}</p>
	<table border="1">
		<thead>
			<tr>
				<th style="text-align: center;">OSP Version </th>
				<th style="text-align: center;">Job Name</th>
				<th style="text-align: center;">Last Build Number</th>
				<th style="text-align: center;">Compose</th>
				<th style="...">Ceph Image</th>
				<th style="text-align: center;">Result</th>
				<th style="text-align: center;">Bugzilla</th>
				<th style="text-align: center;">Jira</th>
			</tr>
		</thead>
		<tbody>
			{% for row in rows %}
			<tr>
				<td style="text-align: center;">{{row.osp_version}}</td>
				<td style="text-align: left;"><a href="{{row.job_url}}">{{row.job_name}}</a></td>				
				<td style="text-align: center;"><a href="{{row.lcb_url}}">{{row.lcb_num}}</a></td>
				<td style="text-align: center;">{{row.compose}}</td>
				<td style="...">{{row.ceph_info}}</td>

				{% if row.lcb_result == "SUCCESS" %}
					<td style="text-align: center;" bgcolor="#4646ff"><a href="https://www.youtube.com/watch?v=68ugkg9RePc" style="text-decoration: none; color: #000;">{{row.lcb_result}}</a></td>
				{% endif %}

				{% if row.lcb_result == "UNSTABLE" %}
					<td style="text-align: center;" bgcolor="#fdd500">{{row.lcb_result}}</td>
				{% endif %}
				
				{% if row.lcb_result == "FAILURE" %}
					<td style="text-align: center;" bgcolor="#ef2929">{{row.lcb_result}}</td>
				{% endif %}

				{% if row.lcb_result == "ERROR" %}
					<td style="text-align: center;" bgcolor="#808080">{{row.lcb_result}}</td>
				{% endif %}

				<td style="text-align: center;">
					{% for bug in row.bugs %}
						{% if bug.bug_url != None %}
							<a href="{{bug.bug_url}}">{{bug.bug_name}}</a>
						{% else %}
							{{bug.bug_name}}
						{% endif %}
						{% if loop.index == row.bugs|length %}
							<br>
						{% else %}
							<hr>
						{% endif %}
					{% endfor %}
				</td>				

				<td style="text-align: center;">
					{% for ticket in row.tickets %}
						{% if ticket.ticket_url != None %}
							<a href="{{ticket.ticket_url}}">{{ticket.ticket_name}}</a>
						{% else %}
							{{ticket.ticket_name}}
						{% endif %}
						{% if loop.index == row.tickets|length %}
							<br>
						{% else %}
							<hr>
						{% endif %}
					{% endfor %}
				</td>			

			</tr>
			{% endfor %}
		</tbody>
	</table>
	<p><b>Summary:</b></p>
	<ul>
		<li>{{summary.total_success}}</li>
		<li>{{summary.total_unstable}}</li>
		<li>{{summary.total_failure}}</li>
		{% if summary.total_error %}
		<li>{{summary.total_error}}</li>
		{% endif %}
		<li>{{summary.total_bugs}}</li>
		<li>{{summary.total_tickets}}</li>
	</ul>
	<p style="text-align: center; font-size: smaller;"><a href="https://github.com/nathan-weinberg/jeeves">Report generated by Jeeves</a></p>
</html>
